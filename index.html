<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Portland Galaxy</title>
<link id="dynamic-favicon" rel="icon" href="">
<link rel="stylesheet" href="style.css" />

<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body { height: 100%; font-family: 'Orbitron', sans-serif; overflow: hidden; color: white; cursor: url('https://i.imgur.com/VYw4R2X.png'), auto; }
  body { background: #000; }
  canvas { display: block; position: fixed; top:0; left:0; z-index: -1; }

  .content {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
  }

  h1 {
    font-size: 3rem;
    margin-bottom: 20px;
    text-shadow: 0 0 20px #6ec6ff, 0 0 40px #4da6ff;
    animation: glow 2s ease-in-out infinite alternate;
  }

  @keyframes glow {
    from { text-shadow: 0 0 10px #6ec6ff, 0 0 20px #4da6ff; }
    to { text-shadow: 0 0 20px #9ad4ff, 0 0 40px #6ec6ff; }
  }

  #date-display {
    font-size: 1.2rem;
    margin-bottom: 20px;
    color: #9ad4ff;
    text-shadow: 0 0 10px #4da6ff;
  }

  /* Glassy container for buttons */
  .button-container {
    display: flex;
    justify-content: center;
    gap: 15px;
    padding: 20px;
    border-radius: 20px;
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
    margin-bottom: 20px;
  }

  .btn {
    padding: 12px 25px;
    font-size: 1.1rem;
    color: white;
    background: rgba(0,0,50,0.6);
    border: 2px solid #6ec6ff;
    border-radius: 20px;
    text-decoration: none;
    transition: 0.3s;
    text-shadow: 0 0 10px #6ec6ff;
    cursor: pointer;
  }

  .btn:hover {
    background: #6ec6ff;
    color: #090a0f;
    box-shadow: 0 0 20px #6ec6ff, 0 0 40px #4da6ff;
  }
</style>
</head>
<body>

<canvas id="starfield"></canvas>

<div class="content">
  <h1>Portland Galaxy</h1>
  <div id="date-display"></div>

  <div class="button-container">
    <a href="games.html" class="btn">Games</a>
    <a href="emulator.html" class="btn">Emulator</a>
    <a href="suggest.html" class="btn">Suggestions</a>
    <button class="btn" onclick="disguiseTab()">Disguise Tab</button>
  </div>
</div>

<script>
// Update live date
function updateDate() {
  const now = new Date();
  document.getElementById("date-display").textContent = now.toDateString() + " " + now.toLocaleTimeString();
}
setInterval(updateDate, 1000);
updateDate();

// Apply saved disguise settings
function applySavedSettings() {
  const savedTitle = localStorage.getItem('disguiseTitle');
  const savedFavicon = localStorage.getItem('disguiseFavicon');
  if (savedTitle) document.title = savedTitle;
  if (savedFavicon) document.getElementById('dynamic-favicon').href = savedFavicon;
}

// Disguise tab by fetching title and favicon from a URL
async function disguiseTab() {
  const url = prompt("Enter any site URL to disguise tab (include https://):");
  if (!url) return;

  try {
    const response = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(url));
    const data = await response.json();
    const html = data.contents;

    const titleMatch = html.match(/<title>(.*?)<\/title>/i);
    const newTitle = titleMatch ? titleMatch[1] : "Portland Galaxy";

    const faviconUrl = new URL("/favicon.ico", url).href;

    document.title = newTitle;
    document.getElementById('dynamic-favicon').href = faviconUrl;

    localStorage.setItem('disguiseTitle', newTitle);
    localStorage.setItem('disguiseFavicon', faviconUrl);

    alert("Tab disguised!");
  } catch (err) {
    alert("Failed to fetch site data. Make sure the URL is valid and includes https://");
  }
}

applySavedSettings();

// Starfield particles background
const canvas = document.getElementById('starfield');
const ctx = canvas.getContext('2d');
let w = canvas.width = window.innerWidth;
let h = canvas.height = window.innerHeight;

const stars = [];
const numStars = 400;

for(let i=0;i<numStars;i++){
  stars.push({
    x: Math.random()*w,
    y: Math.random()*h,
    r: Math.random()*1.5+0.5,
    vx: (Math.random()-0.5)*0.7,
    vy: (Math.random()-0.5)*0.7
  });
}

function animate() {
  ctx.fillStyle = '#000';
  ctx.fillRect(0,0,w,h);

  ctx.fillStyle = '#fff';
  stars.forEach(s=>{
    s.x += s.vx;
    s.y += s.vy;

    if(s.x<0) s.x=w;
    if(s.x>w) s.x=0;
    if(s.y<0) s.y=h;
    if(s.y>h) s.y=0;

    ctx.beginPath();
    ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
    ctx.fill();
  });

  requestAnimationFrame(animate);
}

animate();

window.addEventListener('resize', ()=>{
  w = canvas.width = window.innerWidth;
  h = canvas.height = window.innerHeight;
});
</script>
</body>
</html>
